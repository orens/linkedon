syntax = "proto3";

package linkedon;

option go_package = "github.com/orens/linkedon/linkedon";

service LinkedonService {
    rpc CreatePerson(CreatePersonRequest) returns (Response);
    rpc FollowPerson(FollowPersonRequest) returns (Response);
    rpc Reset(ResetRequest) returns (Response);
    rpc Post(PostRequest) returns (Response);
    rpc GetFeed(GetFeedRequest) returns (GetFeedResponse);
}

message Person {
    string name = 1;
    int32 age = 2;
    int32 id = 3;
}

message CreatePersonRequest {
    Person person = 1;
}


message FollowPersonRequest {
    int32 followerId = 1;
    int32 followeeId = 2;
}

message PostRequest {
    int32 personId = 1;
    int32 postId = 2;
    string content = 3;
}

message ResetRequest {
}

message Response {
    bool success = 1;
    string extra = 2;
}

message GetFeedRequest {
    int32 personId = 1;
}

message GetFeedResponse {
    repeated Post posts = 1;
}

message Post {
    int32 authorId = 1;
    int32 postId = 2;
    string content = 3;
}